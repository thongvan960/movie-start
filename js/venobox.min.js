!function(y){"use strict";var w,C,_,B,P,E,O,D,M,N,U,V,z,R,X,Y,j,W,$,q,I,A,H,Q,S,T,Z,F,G,J,K,L,ee,oe,te,ae,ie,se,ne;y.fn.extend({venobox:function(e){var k=this,x=y.extend({arrowsColor:"#B6B6B6",autoplay:!1,bgcolor:"#fff",border:"0",closeBackground:"#161617",closeColor:"#d2d2d2",framewidth:"",frameheight:"",infinigall:!1,htmlClose:"&times;",htmlNext:"<span>Next</span>",htmlPrev:"<span>Prev</span>",numeratio:!1,numerationBackground:"#161617",numerationColor:"#d2d2d2",numerationPosition:"top",overlayClose:!0,overlayColor:"rgba(23,23,23,0.85)",spinner:"double-bounce",spinColor:"#d2d2d2",titleattr:"title",titleBackground:"#161617",titleColor:"#d2d2d2",titlePosition:"top",cb_pre_open:function(){return!0},cb_post_open:function(){},cb_pre_close:function(){return!0},cb_post_close:function(){},cb_post_resize:function(){},cb_after_nav:function(){},cb_init:function(){}},e);return x.cb_init(k),this.each(function(){function o(){q=Z.data("gall"),Y=Z.data("numeratio"),V=Z.data("infinigall"),z=y('.vbox-item[data-gall="'+q+'"]'),I=z.eq(z.index(Z)+1),A=z.eq(z.index(Z)-1),1<z.length?(F=z.index(Z)+1,_.html(F+" / "+z.length)):F=1,!0===Y?_.show():_.hide(),""!==$?B.show():B.hide(),H=I.length||!0===V?(y(".vbox-next").css("display","block"),!0):(y(".vbox-next").css("display","none"),!1),!0!==(Q=0<z.index(Z)||!0===V?(y(".vbox-prev").css("display","block"),!0):(y(".vbox-prev").css("display","none"),!1))&&!0!==H||(O.on(h.DOWN,e),O.on(h.MOVE,s),O.on(h.UP,n))}function a(e){return!(e.length<1)&&(!R&&(R=!0,j=e.data("overlay")||e.data("overlaycolor"),N=e.data("framewidth"),U=e.data("frameheight"),P=e.data("border"),C=e.data("bgcolor"),D=e.data("href")||e.attr("href"),w=e.data("autoplay"),$=e.attr(e.data("titleattr"))||"",e===A&&O.addClass("animated").addClass("swipe-right"),e===I&&O.addClass("animated").addClass("swipe-left"),void O.animate({opacity:0},500,function(){W.css("background",j),O.removeClass("animated").removeClass("swipe-left").removeClass("swipe-right").css({"margin-left":0,"margin-right":0}),"iframe"==e.data("vbtype")?r():"inline"==e.data("vbtype")?l():"ajax"==e.data("vbtype")?c():"video"==e.data("vbtype")||"vimeo"==e.data("vbtype")||"youtube"==e.data("vbtype")?d(w):(O.html('<img src="'+D+'">'),v()),Z=e,o(),R=!1,x.cb_after_nav(Z,F,I,A)})))}function t(e){27===e.keyCode&&i(),37==e.keyCode&&!0===Q&&a(A),39==e.keyCode&&!0===H&&a(I)}function i(){return!1!==x.cb_pre_close(Z,F,I,A)&&(y("body").off("keydown",t).removeClass("vbox-open"),Z.focus(),void W.animate({opacity:0},500,function(){W.remove(),R=!1,x.cb_post_close()}))}function e(e){O.addClass("animated"),L=oe=e.pageY,ee=te=e.pageX,G=!0}function s(e){if(!0===G){te=e.pageX,oe=e.pageY,ie=te-ee,se=oe-L;var o=Math.abs(ie);Math.abs(se)<o&&o<=100&&(e.preventDefault(),O.css("margin-left",ie))}}function n(e){if(!0===G){var o=Z,t=G=!1;(ae=te-ee)<0&&!0===H&&(o=I,t=!0),0<ae&&!0===Q&&(o=A,t=!0),Math.abs(ae)>=ne&&!0===t?a(o):O.css({"margin-left":0,"margin-right":0})}}function c(){y.ajax({url:D,cache:!1}).done(function(e){O.html('<div class="vbox-inline">'+e+"</div>"),v()}).fail(function(){O.html('<div class="vbox-inline"><p>Error retrieving contents, please retry</div>'),u()})}function r(){O.html('<iframe class="venoframe" src="'+D+'"></iframe>'),u()}function d(e){var o,t=function(e){if(e.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),-1<RegExp.$3.indexOf("youtu"))var o="youtube";else if(-1<RegExp.$3.indexOf("vimeo"))o="vimeo";return{type:o,id:RegExp.$6}}(D),a=(e?"?rel=0&autoplay=1":"?rel=0")+function(e){var o="",t=decodeURIComponent(e).split("?");if(void 0!==t[1]){var a,i,s=t[1].split("&");for(i=0;i<s.length;i++)a=s[i].split("="),o=o+"&"+a[0]+"="+a[1]}return encodeURI(o)}(D);"vimeo"==t.type?o="https://player.vimeo.com/video/":"youtube"==t.type&&(o="https://www.youtube.com/embed/"),O.html('<iframe class="venoframe vbvid" webkitallowfullscreen mozallowfullscreen allowfullscreen frameborder="0" src="'+o+t.id+a+'"></iframe>'),u()}function l(){O.html('<div class="vbox-inline">'+y(D).html()+"</div>"),u()}function v(){(K=O.find("img")).length?K.each(function(){y(this).one("load",function(){u()})}):u()}function u(){B.html($),O.find(">:first-child").addClass("figlio").css({width:N,height:U,padding:P,background:C}),y("img.figlio").on("dragstart",function(e){e.preventDefault()}),b(),O.animate({opacity:"1"},"slow",function(){})}function b(){var e=O.outerHeight(),o=y(window).height();X=e+60<o?(o-e)/2:"30px",O.css("margin-top",X),O.css("margin-bottom",X),x.cb_post_resize()}if((Z=y(this)).data("venobox"))return!0;k.VBclose=function(){i()},Z.addClass("vbox-item"),Z.data("framewidth",x.framewidth),Z.data("frameheight",x.frameheight),Z.data("border",x.border),Z.data("bgcolor",x.bgcolor),Z.data("numeratio",x.numeratio),Z.data("infinigall",x.infinigall),Z.data("overlaycolor",x.overlayColor),Z.data("titleattr",x.titleattr),Z.data("venobox",!0),Z.on("click",function(e){if(e.preventDefault(),Z=y(this),!1===x.cb_pre_open(Z))return!1;switch(k.VBnext=function(){a(I)},k.VBprev=function(){a(A)},j=Z.data("overlay")||Z.data("overlaycolor"),N=Z.data("framewidth"),U=Z.data("frameheight"),w=Z.data("autoplay")||x.autoplay,P=Z.data("border"),C=Z.data("bgcolor"),R=Q=H=!1,D=Z.data("href")||Z.attr("href"),M=Z.data("css")||"",$=Z.attr(Z.data("titleattr"))||"",S='<div class="vbox-preloader">',x.spinner){case"rotating-plane":S+='<div class="sk-rotating-plane"></div>';break;case"double-bounce":S+='<div class="sk-double-bounce"><div class="sk-child sk-double-bounce1"></div><div class="sk-child sk-double-bounce2"></div></div>';break;case"wave":S+='<div class="sk-wave"><div class="sk-rect sk-rect1"></div><div class="sk-rect sk-rect2"></div><div class="sk-rect sk-rect3"></div><div class="sk-rect sk-rect4"></div><div class="sk-rect sk-rect5"></div></div>';break;case"wandering-cubes":S+='<div class="sk-wandering-cubes"><div class="sk-cube sk-cube1"></div><div class="sk-cube sk-cube2"></div></div>';break;case"spinner-pulse":S+='<div class="sk-spinner sk-spinner-pulse"></div>';break;case"three-bounce":S+='<div class="sk-three-bounce"><div class="sk-child sk-bounce1"></div><div class="sk-child sk-bounce2"></div><div class="sk-child sk-bounce3"></div></div>';break;case"cube-grid":S+='<div class="sk-cube-grid"><div class="sk-cube sk-cube1"></div><div class="sk-cube sk-cube2"></div><div class="sk-cube sk-cube3"></div><div class="sk-cube sk-cube4"></div><div class="sk-cube sk-cube5"></div><div class="sk-cube sk-cube6"></div><div class="sk-cube sk-cube7"></div><div class="sk-cube sk-cube8"></div><div class="sk-cube sk-cube9"></div></div>'}return S+="</div>",T='<a class="vbox-next">'+x.htmlNext+'</a><a class="vbox-prev">'+x.htmlPrev+"</a>",J='<div class="vbox-title"></div><div class="vbox-num">0/0</div><div class="vbox-close">'+x.htmlClose+"</div>",E='<div class="vbox-overlay '+M+'" style="background:'+j+'">'+S+'<div class="vbox-container"><div class="vbox-content"></div></div>'+J+T+"</div>",y("body").append(E).addClass("vbox-open"),y(".vbox-preloader .sk-child, .vbox-preloader .sk-rotating-plane, .vbox-preloader .sk-rect, .vbox-preloader .sk-cube, .vbox-preloader .sk-spinner-pulse").css("background-color",x.spinColor),W=y(".vbox-overlay"),y(".vbox-container"),O=y(".vbox-content"),_=y(".vbox-num"),(B=y(".vbox-title")).css(x.titlePosition,"-1px"),B.css({color:x.titleColor,"background-color":x.titleBackground}),y(".vbox-close").css({color:x.closeColor,"background-color":x.closeBackground}),y(".vbox-num").css(x.numerationPosition,"-1px"),y(".vbox-num").css({color:x.numerationColor,"background-color":x.numerationBackground}),y(".vbox-next span, .vbox-prev span").css({"border-top-color":x.arrowsColor,"border-right-color":x.arrowsColor}),O.html(""),O.css("opacity","0"),W.css("opacity","0"),o(),W.animate({opacity:1},250,function(){"iframe"==Z.data("vbtype")?r():"inline"==Z.data("vbtype")?l():"ajax"==Z.data("vbtype")?c():"video"==Z.data("vbtype")||"vimeo"==Z.data("vbtype")||"youtube"==Z.data("vbtype")?d(w):(O.html('<img src="'+D+'">'),v()),x.cb_post_open(Z,F,I,A)}),y("body").keydown(t),y(".vbox-prev").on("click",function(){a(A)}),y(".vbox-next").on("click",function(){a(I)}),!1});var p=".vbox-overlay";x.overlayClose||(p=".vbox-close"),y(document).on("click",p,function(e){(y(e.target).is(".vbox-overlay")||y(e.target).is(".vbox-content")||y(e.target).is(".vbox-close")||y(e.target).is(".vbox-preloader"))&&i()}),ae=te=ee=0,G=!(ne=50);function m(e){var o;switch(e.type){case"mousedown":o=h.DOWN;break;case"mouseup":case"mouseout":o=h.UP;break;case"mousemove":o=h.MOVE;break;default:return}var t=g(o,e,e.pageX,e.pageY);y(e.target).trigger(t)}function f(e){var o;switch(e.type){case"touchstart":o=h.DOWN;break;case"touchend":o=h.UP;break;case"touchmove":o=h.MOVE;break;default:return}var t,a=e.originalEvent.touches[0];t=o==h.UP?g(o,e,null,null):g(o,e,a.pageX,a.pageY),y(e.target).trigger(t)}var h={DOWN:"touchmousedown",UP:"touchmouseup",MOVE:"touchmousemove"},g=function(e,o,t,a){return y.Event(e,{pageX:t,pageY:a,originalEvent:o})};"ontouchstart"in window?(y(document).on("touchstart",f),y(document).on("touchmove",f),y(document).on("touchend",f)):(y(document).on("mousedown",m),y(document).on("mouseup",m),y(document).on("mouseout",m),y(document).on("mousemove",m)),y(window).resize(function(){y(".vbox-content").length&&setTimeout(b(),800)})})}})}(jQuery);